<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="theme/javascript/javascript.js"></script>
<link rel="stylesheet" href="css/reset.css" type="text/css"/>
<link rel="stylesheet" href="css/style.css" type="text/css"/>
<title>TrainWatch!</title>
<style>
      #map-canvas {
        height: 80%;
        width: 100%;
      }
</style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
    <script>
      function initialize() {
        
        if(navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
          var pos = new google.maps.LatLng(position.coords.latitude,
                                         position.coords.longitude);

          alert(pos)

          var myLatlng = new google.maps.LatLng(51.55, -0.5);
          var myLatlng2 = new google.maps.LatLng(51.45, -0.47);
          var myLatlng3 = new google.maps.LatLng(51.47, -0.49);
          var myLatlng4 = new google.maps.LatLng(51.49, -0.45);
          var myLatlng4 = new google.maps.LatLng(51.47, -0.44);
          var myLatlng5 = new google.maps.LatLng(51.43, -0.42);
          var myLatlng6 = new google.maps.LatLng(51.46, -0.43);

          var mapOptions = {
            zoom: 11,
            center: pos
          };

          var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

          var contentString = '<div id="content">'+
             '<div id="siteNotice">'+
             '</div>'+
             '<h1 id="firstHeading" class="firstHeading">Crime - Stabbing</h1>'+
             '<div id="bodyContent">'+
             '<p><b>Crime - Stabbing</b> Information on crime' +
             '</p>'+
             '<p>Attribution: Uluru, <a href="http://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
             'http://en.wikipedia.org/w/index.php?title=Uluru</a> '+
             '(last visited June 22, 2009).</p>'+
             '</div>'+
             '</div>';

          var infowindow = new google.maps.InfoWindow({
              content: contentString
          });

          var marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            title: 'Uluru (Ayers Rock)'
          });

          var marker2 = new google.maps.Marker({
            position: myLatlng2,
            map: map,
            title: 'Test'
          });

          var marker3 = new google.maps.Marker({
            position: myLatlng3,
            map: map,
            title: 'Test'
          });

          var marker4 = new google.maps.Marker({
            position: myLatlng4,
            map: map,
            title: 'Test'
          });

          var marker5 = new google.maps.Marker({
            position: myLatlng5,
            map: map,
            title: 'Test'
          });

          var marker6 = new google.maps.Marker({
            position: myLatlng6,
            map: map,
            title: 'Test'
          });

          google.maps.event.addListener(marker, 'click', function() {
            infowindow.open(map,marker);
          });

          google.maps.event.addListener(marker2, 'click', function() {
            infowindow.open(map,marker2);
          });

          google.maps.event.addListener(marker3, 'click', function() {
            infowindow.open(map,marker3);
          });

          google.maps.event.addListener(marker4, 'click', function() {
            infowindow.open(map,marker4);
          });

          google.maps.event.addListener(marker5, 'click', function() {
            infowindow.open(map,marker5);
          });

          google.maps.event.addListener(marker6, 'click', function() {
            infowindow.open(map,marker6);
          });

          var infowindow = new google.maps.InfoWindow({
            map: map,
            position: pos,
            content: 'Location found using HTML5.'
          });

           map.setCenter(pos);
          }, function() {
            handleNoGeolocation(true);
          });

        } else {
          // Browser doesn't support Geolocation
          handleNoGeolocation(false);
        }
    }

    function handleNoGeolocation(errorFlag) {
      if (errorFlag) {
        var content = 'Error: The Geolocation service failed.';
      } else {
        var content = 'Error: Your browser doesn\'t support geolocation.';
      }
    }
    google.maps.event.addDomListener(window, 'load', initialize);

  </script>
</head>	


<body>
    <div id = "outer"> <!-- every DIV from now own should have class="inner"-->
        <div class= "inner"> <!-- every item (img, text, etc) should have its individual encaseing div. Guarantees resizing. -->
            <div id="title" class="inner"> 
                <img src="img/LOGO Train watch.png" class="innercontent"/>  <!-- every ITEM should have class="innercontent"-->
            </div>
            
            <!-- Insert data here. -->
            <div id="mapwrap" class="inner"> 
                <div id="map-canvas" class ="innercontent"></div>
            </div>
        </div>
    </div>
</body>

</html>