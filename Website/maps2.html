<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="theme/javascript/javascript.js"></script>
<link rel="stylesheet" href="css/reset.css" type="text/css"/>
<link rel="stylesheet" href="css/style.css" type="text/css"/>
<title>TrainWatch!</title>
<style>
      #map-canvas {
        height: 80%;
        width: 100%;
      }
</style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
    <script>
      function initialize() {
        
        if(navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
          var pos = new google.maps.LatLng(position.coords.latitude,
                                         position.coords.longitude);

          var myLatlng = new google.maps.LatLng(51.55, -0.5);
          var myLatlng2 = new google.maps.LatLng(51.45, -0.47);
          var myLatlng3 = new google.maps.LatLng(51.47, -0.49);
          var myLatlng4 = new google.maps.LatLng(51.49, -0.45);
          var myLatlng4 = new google.maps.LatLng(51.47, -0.44);
          var myLatlng5 = new google.maps.LatLng(51.43, -0.42);
          var myLatlng6 = new google.maps.LatLng(51.46, -0.43);

          var mapOptions = {
            zoom: 11,
            center: pos
          };

          var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

          var contentString1 = '<div id="content">'+
             '<div id="siteNotice">'+
             '</div>'+
             '<h1 id="firstHeading" class="firstHeading">Crime - Mugging</h1>'+
             '<div id="bodyContent">'+
             '<p><b></b> Mrs Patterson was robbed of her purse' +
             '</p>'+''
             '</div>'+
             '</div>';

            var contentString2 = '<div id="content">'+
             '<div id="siteNotice">'+
             '</div>'+
             '<h1 id="firstHeading" class="firstHeading">Crime - Stabbing</h1>'+
             '<div id="bodyContent">'+
             '<p><b></b> A Mr Davig Clegg was stabbed while waiting for a train' +
             '</p>'+''
             '</div>'+
             '</div>';

             var contentString3 = '<div id="content">'+
             '<div id="siteNotice">'+
             '</div>'+
             '<h1 id="firstHeading" class="firstHeading">Crime - Metal Theft</h1>'+
             '<div id="bodyContent">'+
             '<p><b></b> Railway went missing at 03:30 on wednesday' +
             '</p>'+''
             '</div>'+
             '</div>';

             var contentString4 = '<div id="content">'+
             '<div id="siteNotice">'+
             '</div>'+
             '<h1 id="firstHeading" class="firstHeading">Crime - Vandalism</h1>'+
             '<div id="bodyContent">'+
             '<p><b></b> The front of the station was defaced at 11:30' +
             '</p>'+''
             '</div>'+
             '</div>';

             var contentString5 = '<div id="content">'+
             '<div id="siteNotice">'+
             '</div>'+
             '<h1 id="firstHeading" class="firstHeading">Crime - Drunk and Disorderly</h1>'+
             '<div id="bodyContent">'+
             '<p><b></b>Reports on train to Euston of 5 drunk males' +
             '</p>'+''
             '</div>'+
             '</div>';

             var contentString6 = '<div id="content">'+
             '<div id="siteNotice">'+
             '</div>'+
             '<h1 id="firstHeading" class="firstHeading">Crime - Stabbing</h1>'+
             '<div id="bodyContent">'+
             '<p><b></b> Mr Bob Parker was stabbed while on he train' +
             '</p>'+''
             '</div>'+
             '</div>';

          var infowindow1 = new google.maps.InfoWindow({
              content: contentString1,
              position: myLatlng
          });

          var infowindow2 = new google.maps.InfoWindow({
              content: contentString2,
              position: myLatlng2
          });

          var infowindow3 = new google.maps.InfoWindow({
              content: contentString3,
              position: myLatlng2
          });

          var infowindow4 = new google.maps.InfoWindow({
              content: contentString4,
              position: myLatlng2
          });

          var infowindow5 = new google.maps.InfoWindow({
              content: contentString5,
              position: myLatlng2
          });

          var infowindow6 = new google.maps.InfoWindow({
              content: contentString6,
              position: myLatlng2
          });

          var marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            title: 'Crime - 583245'
          });

          var marker2 = new google.maps.Marker({
            position: myLatlng2,
            map: map,
            title: 'Test'
          });

          var marker3 = new google.maps.Marker({
            position: myLatlng3,
            map: map,
            title: 'Test'
          });

          var marker4 = new google.maps.Marker({
            position: myLatlng4,
            map: map,
            title: 'Test'
          });

          var marker5 = new google.maps.Marker({
            position: myLatlng5,
            map: map,
            title: 'Test'
          });

          var marker6 = new google.maps.Marker({
            position: myLatlng6,
            map: map,
            title: 'Test'
          });

          google.maps.event.addListener(marker, 'click', function() {
            infowindow1.open(map,marker);
          });

          google.maps.event.addListener(marker2, 'click', function() {
            infowindow2.open(map,marker2);
          });

          google.maps.event.addListener(marker3, 'click', function() {
            infowindow3.open(map,marker3);
          });

          google.maps.event.addListener(marker4, 'click', function() {
            infowindow4.open(map,marker4);
          });

          google.maps.event.addListener(marker5, 'click', function() {
            infowindow5.open(map,marker5);
          });

          google.maps.event.addListener(marker6, 'click', function() {
            infowindow6.open(map,marker6);
          });

          var infowindow = new google.maps.InfoWindow({
            map: map,
            position: pos,
            content: 'Your current location'
          });

           map.setCenter(pos);
          }, function() {
            handleNoGeolocation(true);
          });

        } else {
          // Browser doesn't support Geolocation
          handleNoGeolocation(false);
        }
    }

    function handleNoGeolocation(errorFlag) {
      if (errorFlag) {
        var content = 'Error: The Geolocation service failed.';
      } else {
        var content = 'Error: Your browser doesn\'t support geolocation.';
      }
    }
    google.maps.event.addDomListener(window, 'load', initialize);

  </script>
</head>	


<body>
    <div id = "outer"> <!-- every DIV from now own should have class="inner"-->
        <div class= "inner"> <!-- every item (img, text, etc) should have its individual encaseing div. Guarantees resizing. -->
            <div id="title" class="inner">
                <a href= "police.php"><img src="img/LOGO Train watch.png" class="innercontent"/></a>
            </div>
            
            <!-- Insert data here. -->
            <div id="mapwrap" class="inner"> 
                <div id="map-canvas" class ="innercontent"></div>
            </div>
        </div>
    </div>
</body>

</html>